<main id="main" class="main">
  <div class="pagetitle d-flex justify-content-between">
    <div>
      <h1>Chi tiết sản phẩm {{name}}</h1>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item">
            <a routerLink="/dashboard">Trang chủ</a>
          </li>
          <li class="breadcrumb-item">
            <a routerLink="/dashboard/manager">Sản phẩm</a>
          </li>
          <li class="breadcrumb-item active">Chi tiết sản phẩm</li>
        </ol>
      </nav>
    </div>
  </div>
  <nz-tabset>
    <nz-tab nzTitle="Thông tin">
      <div class="container" style="font-size: 16px">
        <div class="row" >

          <div class="col-xl-7">
            <div class="card">
              <div class="card-body pt-3">
                <b style="font-size: 20px;">Thông tin chi tiết sản phẩm {{name}}</b>

                <div class="tab-pane fade show active profile-overview" id="profile-overview" style="margin-right: 20px">
                  <br>
                  <div class="row">
                    <b class="col-lg-5 col-md-6 label">Nhà sản xuất</b>
                    <div class="col-lg-7 col-md-6" (click)="detailBrand(brandId)">{{ brand }}</div>
                  </div>
                  <br>
                  <div class="row">
                    <b class="col-lg-5 col-md-6 label">Kệ hàng</b>
                    <div class="col-lg-7 col-md-6" (click)="detailShelf(shelfId)">{{ shelf }}</div>
                  </div>
                  <br>
                  <div class="row">
                    <b class="col-lg-5 col-md-6 label">Ngày tạo</b>
                    <div class="col-lg-7 col-md-6">{{ createdAt | date:"dd-MM-yyyy" }}</div>
                  </div>
                  <br>
                  <div class="row">
                    <b class="col-lg-5 col-md-6 label">Người tạo</b>
                    <div class="col-lg-7 col-md-6">{{ createdBy }}</div>
                  </div>
                  <br>
                  <div class="row">
                    <b class="col-lg-5 col-md-6 label">Đường dùng</b>
                    <div class="col-lg-7 col-md-6">{{ routeOfAdministration }}</div>
                  </div>
                  <br>
                  <div class="row">
                    <b class="col-lg-5 col-md-6 label">Mức tồn kho tối thiểu</b>
                    <div class="col-lg-7 col-md-6">{{ mininumInventory }}</div>
                  </div>
                  <br>
                  <div *ngFor="let productUnits of productUnits">
                    <div class="row" *ngIf="productUnits.isBaseUnit" >
                      <b class="col-lg-5 col-md-6 label">Giá bán đơn vị cơ bản</b>
                      <div class="col-lg-7 col-md-6" >{{productUnits.price | currency : 'VND'}} / {{productUnits.conversionValue}} {{productUnits.unit}}</div>
                    </div>
                    <!-- <div class="row" *ngIf="productUnits.isBaseUnit == false">
                      <b class="col-lg-5 col-md-6 label"></b>
                      <div class="col-lg-7 col-md-6" >{{productUnits.price}} / {{productUnits.conversionValue}} {{productUnits.unit}}</div>
                    </div> -->
                  </div>
                  <br>
                  <div class="row" *ngIf="isUseDose">
                    <b class="col-lg-5 col-md-6 label">Có bán theo liều</b>
                  </div>
                  <br>
                  <div class="row" *ngIf="isManagedInBatches">
                    <b class="col-lg-12 col-md-12 label">Có quản lý theo lô - hạn sử dụng</b>
                    <br>
                  </div>
                  <br>
                </div>
              </div>
            </div>
          </div>
          <div class="col-xl-5">
            <div class="card">
              <div class="card-body pt-3">
                <div *ngIf="activeSubstances.length <= 0">Thuốc chưa có thông tin hoạt chất</div>
                <div *ngIf="activeSubstances.length > 0">
                  <b style="font-size: 20px">Hoạt chất của sản phẩm {{name}}</b>
                  <br>
                  <br>
                  <div class="col-12" >
                  <nz-table #basicTable [nzData]="activeSubstances" style="text-align: center; font-size: 18px;" [nzFrontPagination]="false"
                            [nzShowPagination]="false">
                        <!-- <thead style="text-align: center">
                          <tr>
                            <th scope="col" style="text-align: center;">Mã hoạt chất</th>
                            <th scope="col" style="text-align: center;">Tên hoạt chất</th>
                            <th scope="col" style="text-align: center;"></th>
                          </tr>
                        </thead> -->
                    <tbody  *ngFor="let activeSubstances of basicTable.data" style="text-align: center;">
                      <tr *ngIf="activeSubstances.isActive==true">
                        <!-- <td scope="row">{{activeSubstances.id}}</td> -->
                        <td (click)="detailActiveSubstence(activeSubstances.id)">{{activeSubstances.name}}</td>
                        <td>
                          <u (click)="detailActiveSubstence(activeSubstances.id)" style="color: rgb(55, 158, 248)">Xem thuốc có cùng hoạt chất</u>
                        </td>
                      </tr>
                      <tr *ngIf="activeSubstances.isActive==false" style="background-color: rgba(255, 0, 0, 0.253)">
                        <!-- <td scope="row">{{activeSubstances.id}}</td> -->
                        <td (click)="detailActiveSubstence(activeSubstances.id)">{{activeSubstances.name}}</td>
                        <td>
                          <u (click)="detailActiveSubstence(activeSubstances.id)" style="color: rgb(55, 158, 248)">Xem thuốc có cùng hoạt chất</u>
                        </td>
                      </tr>
                    </tbody>
                    </nz-table>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </nz-tab>

    <!-- <nz-tab nzTitle="Hoạt chất">

    </nz-tab> -->

    <nz-tab nzTitle="Lô - Hạn sử dụng">

      <b style="font-size: 20px">Danh sách lô hàng chứa sản phẩm {{name}}</b>
      <br>
      <br>

      <nz-table #basicTable [nzData]="batches" style="font-size: 18px;">
        <thead style="text-align: center">
          <tr>
            <!-- <th scope="col" style="text-align: center;">Mã lô hàng</th> -->
            <th scope="col" style="text-align: center;">Barcode lô hàng</th>
            <th scope="col" style="text-align: center;">Người tạo</th>
            <th scope="col" style="text-align: center;">Ngày tạo</th>
            <th scope="col" style="text-align: center;">Ngày sản xuất</th>
            <th scope="col" style="text-align: center;">Hạn sử dụng</th>
          </tr>
        </thead>
        <tbody  *ngFor="let batches of batches" style="text-align: center;">
          <tr>
            <!-- <td scope="row" (click)="detailGoodsReceiptNote(batches.id)">{{batches.id}}</td> -->
            <td (click)="detailGoodsReceiptNote(batches.id)"><ngx-barcode bc-value={{batches.batchBarcode}} [bc-display-value]="true" [bc-width]="1" [bc-height]="35"></ngx-barcode></td>
            <td (click)="detailGoodsReceiptNote(batches.id)">{{batches.createdBy.name}}</td>
            <td (click)="detailGoodsReceiptNote(batches.id)">{{batches.createdAt | date:'dd-MM-yyyy'}}</td>
            <td (click)="detailGoodsReceiptNote(batches.id)">{{batches.manufacturingDate | date:'dd-MM-yyyy'}}</td>
            <td (click)="detailGoodsReceiptNote(batches.id)">{{batches.expiryDate | date:'dd-MM-yyyy'}}</td>
          </tr>
        </tbody>
      </nz-table>
      </nz-tab>

  </nz-tabset>
</main>
