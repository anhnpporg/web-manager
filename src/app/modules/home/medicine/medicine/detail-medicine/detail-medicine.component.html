<main id="main" class="main">
  <div class="pagetitle d-flex justify-content-between">
    <div>
      <h1>Chi tiết thuốc {{name}}</h1>
      <nav>
        <ol class="breadcrumb">
          <li class="breadcrumb-item">
            <a routerLink="/dashboard">Trang chủ</a>
          </li>
          <li class="breadcrumb-item">
            <a routerLink="/dashboard/manager">Thuốc</a>
          </li>
          <li class="breadcrumb-item active">Chi tiết thuốc</li>
        </ol>
      </nav>
    </div>
  </div>
  <nz-tabset>
    <nz-tab nzTitle="Thông tin">
      <div class="container" style="font-size: 16px">
        <div class="row" >

          <div class="col-xl-7">
            <div class="card">
              <div class="card-body pt-3">
                <b style="font-size: 20px;">Thông tin chi tiết thuốc {{name}}</b>

                <div class="tab-pane fade show active profile-overview" id="profile-overview" style="margin-right: 20px">
                  <br>
                  <div class="row">
                    <b class="col-lg-5 col-md-6 label">Nhà cung cấp</b>
                    <div class="col-lg-7 col-md-6">{{ brand }}</div>
                  </div>
                  <br>
                  <div class="row">
                    <b class="col-lg-5 col-md-6 label">Kệ hàng</b>
                    <div class="col-lg-7 col-md-6">{{ shelf }}</div>
                  </div>
                  <br>
                  <div class="row">
                    <b class="col-lg-5 col-md-6 label">Ngày tạo</b>
                    <div class="col-lg-7 col-md-6">{{ createdAt | date:"dd-MM-yyyy" }}</div>
                  </div>
                  <br>
                  <div class="row">
                    <b class="col-lg-5 col-md-6 label">Người tạo</b>
                    <div class="col-lg-7 col-md-6">{{ createdBy }}</div>
                  </div>
                  <br>
                  <div class="row">
                    <b class="col-lg-5 col-md-6 label">Đường dùng</b>
                    <div class="col-lg-7 col-md-6">{{ routeOfAdministration }}</div>
                  </div>
                  <br>
                  <div class="row">
                    <b class="col-lg-5 col-md-6 label">Mức tồn kho tối thiểu</b>
                    <div class="col-lg-7 col-md-6">{{ mininumInventory }}</div>
                  </div>
                  <br>
                  <div *ngFor="let productUnits of productUnits">
                    <div class="row" *ngIf="productUnits.isBaseUnit">
                      <b class="col-lg-5 col-md-6 label">Giá bán cơ bản</b>
                      <div class="col-lg-7 col-md-6" >{{productUnits.price}} / {{productUnits.conversionValue}} {{productUnits.unit}}</div>
                    </div>
                  </div>
                  <br>
                  <div class="row" *ngIf="isUseDose">
                    <b class="col-lg-5 col-md-6 label">Có bán theo liều</b>
                  </div>
                  <br>
                  <div class="row" *ngIf="isManagedInBatches">
                    <b class="col-lg-12 col-md-12 label">Có quản lý theo lô - hạn sử dụng</b>
                  </div>
                  <br>
                </div>
              </div>
            </div>
          </div>
          <div class="col-xl-5">
            <div class="card">
              <div class="card-body pt-3">
                <div *ngIf="activeSubstances.length <= 0">Thuốc chưa có thông tin hoạt chất</div>
      <div *ngIf="activeSubstances.length > 0">
      <b style="font-size: 20px">Danh sách hoạt chất của thuốc {{name}}</b>
      <br>
      <br>
      <div class="col-12" >
        <nz-table #basicTable [nzData]="activeSubstances" style="text-align: center; font-size: 18px;" [nzFrontPagination]="false"
        [nzShowPagination]="false">
          <thead style="text-align: center">
            <tr>
              <!-- <th scope="col" style="text-align: center;">Mã hoạt chất</th> -->
              <th scope="col" style="text-align: center;">Tên hoạt chất</th>
              <th scope="col" style="text-align: center;"></th>
            </tr>
          </thead>
          <tbody  *ngFor="let activeSubstances of basicTable.data" style="text-align: center;">
            <tr>
              <!-- <td scope="row">{{activeSubstances.id}}</td> -->
              <td>{{activeSubstances.name}}</td>
              <td>
                <u (click)="detailActiveSubstence(activeSubstances.id)" style="color: rgb(55, 158, 248)">Xem thuốc có cùng hoạt chất</u>
                <!-- <button
                (click)="detailActiveSubstence(activeSubstances.id)"
                style="
                  background-color: rgba(0, 162, 255, 0.836);
                  color: white;
                  font-size: 16px;
                  border-radius: 18px;
                  border-color: rgba(0, 162, 255, 0.836);
                ">
                Xem thuốc có cùng hoạt chất
              </button> -->
              </td>
            </tr>
          </tbody>
        </nz-table>
      </div>
      </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </nz-tab>

    <!-- <nz-tab nzTitle="Hoạt chất">

    </nz-tab> -->

    <nz-tab nzTitle="Lô - Hạn sử dụng">
      <div *ngIf="batches.length <= 0">Thuốc không thuốc lô hàng nào</div>
      <div *ngIf="batches.length > 0">
      <b style="font-size: 20px">Danh sách lô hàng chứa thuốc {{name}}</b>
      <br>
      <br>

      <nz-table #basicTable [nzData]="batches" style="font-size: 18px;">
        <thead style="text-align: center">
          <tr>
            <th scope="col" style="text-align: center;">Mã lô hàng</th>
            <th scope="col" style="text-align: center;">Barcode lô hàng</th>
            <th scope="col" style="text-align: center;">Người tạo</th>
            <th scope="col" style="text-align: center;">Ngày tạo</th>
            <th scope="col" style="text-align: center;">Ngày sản xuất</th>
            <th scope="col" style="text-align: center;">Hạn sử dụng</th>
          </tr>
        </thead>
        <tbody  *ngFor="let batches of batches" style="text-align: center;">
          <tr>
            <td scope="row" (click)="detailGoodsReceiptNote(batches.id)">{{batches.id}}</td>
            <td (click)="detailGoodsReceiptNote(batches.id)"><ngx-barcode bc-value={{batches.batchBarcode}} [bc-display-value]="true" [bc-width]="1" [bc-height]="35"></ngx-barcode></td>
            <td (click)="detailGoodsReceiptNote(batches.id)">{{batches.createdBy.name}}</td>
            <td (click)="detailGoodsReceiptNote(batches.id)">{{batches.createdAt | date:'dd-MM-yyyy'}}</td>
            <td (click)="detailGoodsReceiptNote(batches.id)">{{batches.manufacturingDate | date:'dd-MM-yyyy'}}</td>
            <td (click)="detailGoodsReceiptNote(batches.id)">{{batches.expiryDate | date:'dd-MM-yyyy'}}</td>
          </tr>
        </tbody>
      </nz-table>
    </div>
      </nz-tab>

  </nz-tabset>
</main>
